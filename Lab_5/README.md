# Лабораторная работа 5
 
### Цель: 
 
Освоить командные оболочки shell (для OS семейства Unix) и cmd (для OS семейства MS Windows):
+ изучить основные встроенные команды,
+ научиться писать файлы сценариев,
+ научиться соотносить командные оболочки для разных OS.
+ Освоить командное окружение для OS семейства Unix(утилиты из пакета GNU Core Utilities), и соответствующие им утилиты для OS семейства MS Windows.
### Условия задания
56. Создать файл sh и bat, который выполняет следующее: 
На вход пакетному файлу приходит относительный или абсолютный путь к папке (как параметры пакетного файла). ). Если такой папки нет, то писать “Данной папки нет” и завершить выполнение программы. Если такая папка есть, то в ней и в ее подкаталогах найти все файлы с расширением *.txt и в каждом из них найти слова, которые начинаются с буквы v или V. Записать все эти слова в файл result.txt

## Batch файл
- ### Код программы :computer:
```batch
@echo off
chcp 65001

if "%~1"=="" (
    echo Не указан путь к папке
    exit /b 1
)

set "DIR=%~1"

if not exist "%DIR%" (
    echo Данной папки нет
    exit /b 1
)

if exist result.txt del result.txt

for /r "%DIR%" %%f in (*.txt) do (
    findstr /r /i "\<v[a-z]*" "%%f" >> result.txt
)

echo Результат записан в result.txt
exit /b 0
```
### Пример работы кода
![](im1.png)

### Пояснение кода

Файл запускается командой
```
"name".bat "folder location" 
```
Отключает вывод команд в командной строке для удобного отображения.
```
@echo off
```
Устанавливает кодировку UTF-8, чтобы корректно отображать кириллические символы.
```
chcp 65001
```
Проверяет, передан ли аргумент (пути к директориям). Если нет, то выводит сообщение об ошибке и завершает скрипт.
```
if "%~1"=="" (...)
```
Получает абсолютный путь.
```
set "DIR=%~1"
```
Проверяет существование папки.
```
if not exist "%DIR%" (...)
```
Удаляет старый result.txt, если он существует .
```
if exist result.txt del result.txt
```
Ищет все файлы *.txt и слова, начинающиеся на V/v.
```
for /r "%DIR%" %%f in (*.txt) do (
    findstr /r /i "\<v[a-z]*" "%%f" >> result.txt
)
```
Вывод сообщения о том, что результат записан в result.txt.
```
echo 
```
Завершает выполнение скрипта с кодом 0 (успешное завершение).
```
exit /b 0
```
## Bash файл
- ### Код программы :computer:
```bash
#!/bin/bash

if [ -z "$1" ]; then
  echo "Не указан путь к папке"
  exit 1
fi

DIR="$1"

if [ ! -d "$DIR" ]; then
  echo "Данной папки нет"
  exit 1
fi

find "$DIR" -type f -name "*.txt" -exec grep -oE '\b[Vv][a-zA-Z]*\b' {} + > result.txt

echo "Результат записан в result.txt"
exit 0
```
### Пояснение кода

Файл запускается командой
```
bash "name".sh "folder location" 
```
Указывает, что скрипт должен выполняться с использованием интерпретатора bash.
```
#!/bin/bash
```
Проверяет,передан ли аргумент,если нет ,то выводит сообщение об ошибке и завершает работу скрипта.
```
if [ -z "$1" ]; then
  echo "Не указан путь к папке"
  exit 1
fi
```
Получает абсолютный путь.
```
DIR="$1"
```
Проверяет, существует ли папка. Если нет, выводит сообщение и завершает выполнение.
```
if [ ! -d "$DIR" ]; then
  echo "Данной папки нет"
  exit 1
fi
```
Ищет все файлы *.txt и слова, начинающиеся с V или v.
```
find "$DIR" -type f -name "*.txt" -exec grep -oE '\b[Vv][a-zA-Z]*\b' {} + > result.txt
```
Вывод сообщения о завершении операции.
```
echo "Результат записан в result.txt"
```
Завершает выполнение скрипта с кодом 0 (успешное завершение).
```
exit 0
```
### Выводы: 
 В ходе выполнения лабораторной работы по освоению командных оболочек cmd (для операционных систем семейства MS Windows) и shell (для операционных систем семейства Unix) были получены практические навыки работы с консольными программами и командами в различных операционных системах. 
