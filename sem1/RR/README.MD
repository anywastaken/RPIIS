# Расчетная работа 

## Введение

### Цели: 
научится работать с графами, создавать программы определяющие виды графов

### Задача: 
Найти дерево кратчайших путей

### Вариант: 
5.29 матрица смежности

### Определения:

`Матрица смежности` — таблица, где как столбцы, так и строки соответствуют вершинам графа. В каждой ячейке этой матрицы записывается число, определяющее наличие связи от вершины-строки к вершине-столбцу (либо наоборот).

`Граф` — математическая абстракция реальной системы любой природы, объекты которой обладают парными связями. Граф как математический объект есть совокупность двух множеств — множества самих объектов, называемого множеством вершин, и множества их парных связей, называемого множеством рёбер. Элемент множества рёбер есть пара элементов множества вершин.

`Ориентированный граф` — граф, рёбра которого имеют направление, в отличие от неориетированного графа.

`Взвешенный граф` — граф, каждому ребру которого поставлено в соответствие некое значение (вес ребра).
 
### Алгоритм:
1.  Выбрать файл с матрицей смежности и открыть его или ввести матрицу смежности с клавиатуры
2.  Проверить совпадает ли количество строк и столбцов в матрице, если она была открыта из файла
3. Заполнить матрицу полученными данными
4. Выбрать начальную вершину
5. Проверить взвешенность и ориентированность графа
6. Вывести на экран выводы об ориетированности и взвешенности графа и матрицу смежности
7. Подсчитать кратчайшие пути:
  1) Записать путь от вершину начала к смежным вершинам
  2) Взять вершину путь к которой уже подсчитан
  3) Проверить будет ли сумма пути до этой вершины и от этой к смежной ей вершине короче уже записаного пути к этой смежной вершине. Если нет, пропустить пункт 4)
  4) Перезаписать новый путь к этой смежной вершине
  5) Повторить для остальных точек необходимое количество раз
8. Вывести полученные расстояния до вершин и пути к ним
 ## Код программы:
```cpp
#include <iostream>
#include <vector>

using namespace std;

bool isBerzhGraph(int n, const vector<vector<int>>& adjList)
{
    // Проверяем, есть ли петли или многократные рёбра
    for (int i = 0; i < n; i++)
    {
        for (int j = 0; j < adjList[i].size(); j++)
        {
            int u = adjList[i][j];

            // Проверка на петли (ребра, соединяющие вершину с самой собой)
            if (u == i)
            {
                return false; // Граф не является графом Бержа
            }

            // Проверка на многократные рёбра
            for (int k = j + 1; k < adjList[i].size(); k++)
            {
                if (adjList[i][k] == u)
                {
                    return false; // Граф не является графом Бержа
                }
            }
        }
    }

    return true; // Граф является графом Бержа
}

int main()
{
    setlocale(LC_ALL, "Russian");

    int n, m;

    // Ввод количества вершин и рёбер
    cout << "Введите количество вершин (n) и рёбер (m): ";
    cin >> n >> m;

    // Проверка ввода n и m
    if (cin.fail() || n <= 0 || m < 0)
    {
        cout << "Ошибка ввода! Количество вершин и рёбер должно быть положительным." << endl;
        return 1;
    }

    // Проверка на избыточное количество рёбер
    if (m > n * (n - 1) / 2)
    {
        cout << "Ошибка: количество рёбер превышает максимально допустимое для простого графа." << endl;
        return 1;
    }

    // Список смежности
    vector<vector<int>> adjList(n);

    cout << "Введите рёбра (двухсторонние (u, v), вершины нумеруются с 0 до " << n - 1 << "):" << endl;

    for (int i = 0; i < m; i++)
    {
        int u, v;
        cin >> u >> v;

        // Проверка ввода вершин
        if (cin.fail() || u < 0 || u >= n || v < 0 || v >= n)
        {
            cout << "Ошибка ввода! Вершины должны быть в диапазоне от 0 до " << n - 1 << "." << endl;
            return 1;
        }

        // Проверка на петлю
        if (u == v)
        {
            cout << "Ошибка: петли (ребра вида " << u << " -> " << v << ") недопустимы для графа Бержа." << endl;
            return 1;
        }

        // Проверка на многократные рёбра вручную
        bool duplicate = false;
        for (int x : adjList[u])
        {
            if (x == v)
            {
                duplicate = true;
                break;
            }
        }
        if (duplicate)
        {
            cout << "Ошибка: ребро между вершинами " << u << " и " << v << " уже существует." << endl;
            return 1;
        }

        // Добавляем ребро в список смежности
        adjList[u].push_back(v);
        adjList[v].push_back(u);
    }

    // Определяем, является ли граф графом Бержа
    if (isBerzhGraph(n, adjList))
    {
        cout << "Граф является графом Бержа." << endl;
    }
    else
    {
        cout << "Граф не является графом Бержа." << endl;
    }

    return 0;
}

```
 ## Содержимое файлов:
 ### graph1.txt
```
0 7 0 40 13 
7 0 10 23 9 
0 10 0 11 0 
40 23 11 0 0
13 9 0 0 0
```
 ### graph2.txt
```
0 1 0 0 1 0
1 0 1 0 1 0
0 1 0 1 0 0
0 0 1 0 1 1
1 1 0 1 0 0
0 0 0 1 0 0
```
 ### graph3.txt
```
0 40 0 0 18
40 0 22 6 15
0 22 0 14 0
0 6 14 0 20
18 15 0 20 0
```
 ### graph4.txt
```
0 17 0 0 0 0 0 40 0 0 0 0 0 0
0 0 8 0 0 0 0 0 0 0 0 0 0 0
14 0 0 32 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 15 0 0 12 0 0 0 0 32
0 0 0 0 0 0 0 0 0 0 21 0 0 9
0 0 0 0 21 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 34 0 0 0 0
0 0 0 0 0 0 9 0 0 0 0 13 5 0
0 0 0 0 0 0 0 21 0 0 0 0 0 0
0 0 11 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 52 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 2 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
```
 ### graph5.txt
```
0 5 10 0 0 0 0 0 0 0 
5 0 0 7 0 0 0 0 0 0 
10 0 0 0 24 0 0 12 0 0 
0 7 0 0 8 0 13 0 0 0 
0 0 24 8 0 3 0 0 0 0 
0 0 0 0 3 0 6 0 0 21 
0 0 0 13 0 6 0 9 0 0 
0 0 12 0 0 0 9 0 2 0 
0 0 0 0 0 0 0 2 0 11 
0 0 0 0 0 21 0 0 11 0
```
 ## Пример работы кода
### Для файла graph1.txt
```
Выберите метод заполнения графа:
1.Выбрать один из предоставленных файлов
2.Ввести матрицу смежности графа с клавиатуры.
1

Введите номер матрицы смежности графа(1-5) или вручную введите абсолютный путь к файлу(6): 1
Введите точку начала(начиная с 0): 0

Граф является неориентированным.
Граф является взвешенным.

0 7 0 40 13 
7 0 10 23 9 
0 10 0 11 0 
40 23 11 0 0
13 9 0 0 0

Точка 0 была выбрана вами как точка начала

Расстояние до точки  1 : 7
Путь к точке  1 : 0 --> 1

Расстояние до точки  2 : 17
Путь к точке  2 : 0 --> 1 --> 2

Расстояние до точки  3 : 28
Путь к точке  3 : 0 --> 1 --> 2 --> 3

Расстояние до точки  4 : 13
Путь к точке  4 : 0 --> 4
```
### Для файла graph4.txt
```
Выберите метод заполнения графа:
1.Выбрать один из предоставленных файлов
2.Ввести матрицу смежности графа с клавиатуры.
1

Введите номер матрицы смежности графа(1-5) или вручную введите абсолютный путь к файлу(6): 4
Введите точку начала(начиная с 0): 0

Граф является ориетированным.
Граф является взвешенным.

0 17 0 0 0 0 0 40 0 0 0 0 0 0 
0 0 8 0 0 0 0 0 0 0 0 0 0 0 
14 0 0 32 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 15 0 0 12 0 0 0 0 32 
0 0 0 0 0 0 0 0 0 0 21 0 0 9 
0 0 0 0 21 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 34 0 0 0 0 
0 0 0 0 0 0 9 0 0 0 0 13 5 0 
0 0 0 0 0 0 0 21 0 0 0 0 0 0 
0 0 11 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 52 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 2 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 

Точка 0 была выбрана вами как точка начала

Расстояние до точки  1 : 17
Путь к точке  1 : 0 --> 1

Расстояние до точки  2 : 25
Путь к точке  2 : 0 --> 1 --> 2

Расстояние до точки  3 : 57
Путь к точке  3 : 0 --> 1 --> 2 --> 3

Расстояние до точки  4 : 93
Путь к точке  4 : 0 --> 1 --> 2 --> 3 --> 5 --> 4

Расстояние до точки  5 : 72
Путь к точке  5 : 0 --> 1 --> 2 --> 3 --> 5

Расстояние до точки  6 : 47
Путь к точке  6 : 0 --> 7 --> 12 --> 6

Расстояние до точки  7 : 40
Путь к точке  7 : 0 --> 7

Расстояние до точки  8 : 69
Путь к точке  8 : 0 --> 1 --> 2 --> 3 --> 8

Расстояние до точки  9 : 81
Путь к точке  9 : 0 --> 7 --> 12 --> 6 --> 9

Расстояние до точки  10 : 114
Путь к точке  10 : 0 --> 1 --> 2 --> 3 --> 5 --> 4 --> 10

Расстояние до точки  11 : 53
Путь к точке  11 : 0 --> 7 --> 11

Расстояние до точки  12 : 45
Путь к точке  12 : 0 --> 7 --> 12

Расстояние до точки  13 : 89
Путь к точке  13 : 0 --> 1 --> 2 --> 3 --> 13
```
### Для файла graph5.txt
```
Выберите метод заполнения графа:
1.Выбрать один из предоставленных файлов
2.Ввести матрицу смежности графа с клавиатуры.
1

Введите номер матрицы смежности графа(1-5) или вручную введите абсолютный путь к файлу(6): 5
Введите точку начала(начиная с 0): 0

Граф является неориентированным.
Граф является взвешенным.

0 5 10 0 0 0 0 0 0 0 
5 0 0 7 0 0 0 0 0 0 
10 0 0 0 24 0 0 12 0 0 
0 7 0 0 8 0 13 0 0 0 
0 0 24 8 0 3 0 0 0 0 
0 0 0 0 3 0 6 0 0 21 
0 0 0 13 0 6 0 9 0 0 
0 0 12 0 0 0 9 0 2 0 
0 0 0 0 0 0 0 2 0 11 
0 0 0 0 0 21 0 0 11 0 

Точка 0 была выбрана вами как точка начала

Расстояние до точки  1 : 5
Путь к точке  1 : 0 --> 1

Расстояние до точки  2 : 10
Путь к точке  2 : 0 --> 2

Расстояние до точки  3 : 12
Путь к точке  3 : 0 --> 1 --> 3

Расстояние до точки  4 : 20
Путь к точке  4 : 0 --> 1 --> 3 --> 4

Расстояние до точки  5 : 23
Путь к точке  5 : 0 --> 1 --> 3 --> 4 --> 5

Расстояние до точки  6 : 25
Путь к точке  6 : 0 --> 1 --> 3 --> 6

Расстояние до точки  7 : 22
Путь к точке  7 : 0 --> 2 --> 7

Расстояние до точки  8 : 24
Путь к точке  8 : 0 --> 2 --> 7 --> 8

Расстояние до точки  9 : 35
Путь к точке  9 : 0 --> 2 --> 7 --> 8 --> 9
```
  
 ## Вывод
 В результате выполнения данной работы были получены следующие практические навыки:
 
изучены основы теории графов

изучены способы представления графов

изучены базовые алгоритмы для работы с графами
