# Лабораторная работа №5

## Введение
Цель задания состояла в том, чтобы создать два скрипта:
- `.sh` файл для Linux/MacOS
- `.bat` файл для Windows

Эти файлы принимают на вход:
1. Относительный путь к папке.
2. Имя файла для сохранения результатов.

Если указанной папки не существует, скрипт сообщает об этом и завершает выполнение. В противном случае он вычисляет:
- Суммарный размер всех файлов в папке и её подкаталогах.
- Общее количество файлов.

Результаты записываются в указанный выходной файл.

---

## Реализация `.sh` файла (Linux/MacOS)

### Шаги разработки
1. **Проверка входных параметров:**
   Проверяется, переданы ли два параметра. Если нет, программа выводит сообщение об ошибке и завершает выполнение.

2. **Проверка существования папки:**
   Используется команда `if [ ! -d "$FOLDER_PATH" ]`, чтобы проверить, существует ли папка.

3. **Вычисление размеров файлов:**
   Используется команда `find` для рекурсивного поиска файлов. Их размеры извлекаются с помощью `stat`, а подсчёт производится в цикле `while`.

4. **Сохранение результатов:**
   Вывод записывается в указанный файл с помощью команды `echo`.

### Пример кода
```bash
#!/bin/bash

# Проверка входных параметров
if [ "$#" -ne 2 ]; then
    echo "Usage: $0 <folder_path> <output_file>"
    exit 1
fi

FOLDER_PATH=$1
OUTPUT_FILE=$2

# Проверка существования папки
if [ ! -d "$FOLDER_PATH" ]; then
    echo "The folder does not exist"
    exit 1
fi

# Инициализация счётчиков
total_size=0
total_files=0

# Обработка файлов
while IFS= read -r -d '' file; do
    size=$(stat --printf="%s" "$file")
    total_size=$((total_size + size))
    total_files=$((total_files + 1))
done < <(find "$FOLDER_PATH" -type f -print0)

# Запись результатов
echo "$FOLDER_PATH, $total_size bytes, $total_files files" > "$OUTPUT_FILE"
```

---

## Реализация `.bat` файла (Windows)

### Шаги разработки
1. **Проверка входных параметров:**
   Используется условие `if "%~2"==""`, чтобы убедиться, что два параметра переданы.

2. **Проверка существования папки:**
   Применяется команда `if not exist "%FOLDER_PATH%"` для проверки.

3. **Вычисление размеров файлов:**
   Команда `for /r` рекурсивно перебирает файлы, а размеры извлекаются через `%~zf`.

4. **Сохранение результатов:**
   Вывод записывается в файл с помощью `echo`.

### Пример кода
```bat
@echo off

REM Проверка входных параметров
if "%~2"=="" (
    echo Usage: %~nx0 ^<folder_path^> ^<output_file^>
    exit /b 1
)

set "FOLDER_PATH=%~1"
set "OUTPUT_FILE=%~2"

REM Проверка существования папки
if not exist "%FOLDER_PATH%" (
    echo The folder does not exist
    exit /b 1
)

set "total_size=0"
set "total_files=0"

REM Обработка файлов
for /r "%FOLDER_PATH%" %%f in (*) do (
    set /a total_files+=1
    for %%s in (%%~zf) do set /a total_size+=%%s
)

REM Запись результатов
echo %FOLDER_PATH%, %total_size% bytes, %total_files% files > "%OUTPUT_FILE%"
```

---

## Вывод
Оба скрипта имеют схожую структуру, но используют разные команды для взаимодействия с ОС. Основные различия:
- В Windows используется `for /r` и переменные `%%~`, тогда как в Linux применяется `find`.
- Обработка строк и проверка условий отличаются синтаксисом.

Эти скрипты предоставляют удобный способ автоматизировать вычисление размеров файлов и сохранять результаты в файл.

